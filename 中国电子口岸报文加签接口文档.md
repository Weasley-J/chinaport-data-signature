# chinaport-data-signature
Version |  Update Time  | Status | Author |  Description
---|---|---|---|---
1.0|2022-02-16 10:30|创建|Weasley J|创建api文档
1.0.9|2023-06-11 15:36|编辑|Weasley J|更新api文档
1.1.0|2023-07-13 15:36|编辑|Weasley J|完善文档



## 电子口岸报文加签测试
### 海关总署XML数据加签
**URL:** http://localhost:8080/rpc/eport/test/cebmessage/signature

**Type:** GET

**Author:** lwj

**Content-Type:** application/x-www-form-urlencoded;charset=utf-8

**Description:** 非正式调用API，只为了让你看到海关总署XML加密的数据返回格式

**Request-example:**
```
curl -X GET -i http://localhost:8080/rpc/eport/test/cebmessage/signature
```
**Response-fields:**

Field | Type|Description|Since
---|---|---|---
message|string|返回消息|-
success|boolean|是否成功|-
timestamp|string|响应时间戳|-
code|int32|状态码|-
data|object|响应数据|-
└─success|boolean|本次加签是否成功|-
└─certNo|string|签名的ukey的卡序列号|-
└─x509Certificate|string|签名的ukey证书|-
└─digestValue|string|xml的数字摘要，先对不包含Signature节点的原始报文,进行C14n格式化，然后取shal二进制摘要，然后对sha1的值进行base64编码<br><ul><br>    <li><a href='http://tool.qdhuaxun.cn/ceb/CEB311Message.xml'>待加签报文样例</a></li><br></ul>|-
└─signatureValue|string|调用ukey获取的签名值|-

**Response-example:**
```
{
  "message": "success",
  "success": true,
  "timestamp": "2023-07-13 13:34:51",
  "code": 211,
  "data": {
    "success": true,
    "certNo": "otcy16",
    "x509Certificate": "gyleho",
    "digestValue": "7a70i7",
    "signatureValue": "iwcjp7"
  }
}
```

### 海关179数据抓取加签
**URL:** http://localhost:8080/rpc/eport/test/179/signature

**Type:** GET

**Author:** lwj

**Content-Type:** application/x-www-form-urlencoded;charset=utf-8

**Description:** 非正式调用API，只为了让你看到179加密的数据返回格式

**Request-example:**
```
curl -X GET -i http://localhost:8080/rpc/eport/test/179/signature
```
**Response-fields:**

Field | Type|Description|Since
---|---|---|---
message|string|返回消息|-
success|boolean|是否成功|-
timestamp|string|响应时间戳|-
code|int32|状态码|-
data|object|响应数据|-
└─success|boolean|本次加签是否成功|-
└─certNo|string|签名的ukey的卡序列号|-
└─x509Certificate|string|签名的ukey证书|-
└─digestValue|string|xml的数字摘要，先对不包含Signature节点的原始报文,进行C14n格式化，然后取shal二进制摘要，然后对sha1的值进行base64编码<br><ul><br>    <li><a href='http://tool.qdhuaxun.cn/ceb/CEB311Message.xml'>待加签报文样例</a></li><br></ul>|-
└─signatureValue|string|调用ukey获取的签名值|-

**Response-example:**
```
{
  "message": "success",
  "success": true,
  "timestamp": "2023-07-13 13:34:51",
  "code": 719,
  "data": {
    "success": true,
    "certNo": "rgnuc2",
    "x509Certificate": "zeotwu",
    "digestValue": "puezc4",
    "signatureValue": "omv0hj"
  }
}
```

### 执行脚本命令
**URL:** http://localhost:8080/rpc/eport/test/endpoint/exec

**Type:** GET

**Author:** lwj

**Content-Type:** application/x-www-form-urlencoded;charset=utf-8

**Description:** 此接口测试环境、生产环境不对外开放（危险），会在将终端输出同步写给浏览器

**Query-parameters:**

Parameter | Type|Description|Required|Since
---|---|---|---|---
cmd|string|No comments found.|true|-

**Request-example:**
```
curl -X GET -i http://localhost:8080/rpc/eport/test/endpoint/exec?cmd=fpdt7k
```

**Response-example:**
```
Return void.
```

## Ukey健康状态恢复
### ukey健康指令
**URL:** http://localhost:8080/rpc/ukey/health/endpoint/{command}

**Type:** POST

**Author:** lwj

**Content-Type:** application/x-www-form-urlencoded;charset=utf-8

**Description:** <ul><br>支持command类型<br><li>RESTART:重启控件(较多使用)</li><br><li>START: 启动控件</li><br><li>STOP: 停止控件</li><br><li>REPAIR: 修复证书</li><br></ul>

**Request-example:**
```
curl -X POST -i http://localhost:8080/rpc/ukey/health/endpoint/
```
**Response-fields:**

Field | Type|Description|Since
---|---|---|---
message|string|返回消息|-
success|boolean|是否成功|-
timestamp|string|响应时间戳|-
code|int32|状态码|-
data|object|响应数据|-
└─stdOutList|array|标准输出流信息|-
└─errorOutList|array|错误输出流信息|-

**Response-example:**
```
{
  "message": "success",
  "success": true,
  "timestamp": "2023-07-13 13:34:51",
  "code": 789,
  "data": {
    "stdOutList": [
      "hqges0"
    ],
    "errorOutList": [
      "mnwkwr"
    ]
  }
}
```

## 电子口岸报文推送
### 推送CEBMessage报文
**URL:** http://localhost:8080/rpc/eport/upload/CEBMessage

**Type:** POST

**Author:** weasley

**Content-Type:** application/json; charset=utf-8

**Description:** <ul><br>支持JSON报文和XML报文,CEB311Message为例:<br><li><br><b>JSON报文: 无需组装XML结构报文</b><br><pre><br>{<br>  "messageType": "CEB311Message",<br>  "dataType": "JSON",<br>  "cebMessage": {"order":{"orderHead":{"guid":"AFNC7T-WEASLEY-20230713095517-N04JEE","appType":"1","appTime":"20230704181028","appStatus":"2","orderType":"I","orderNo":"T_C5051511332138160010","ebpCode":"4601630004","ebpName":"海南省荣誉进出口贸易有限公司","ebcCode":"4601630004","ebcName":"海南省荣誉进出口贸易有限公司","goodsValue":"0.01","freight":"0","discount":"0","taxTotal":"0","acturalPaid":"0.01","currency":"142","buyerRegNo":"4","buyerName":"袁晓雨","buyerTelephone":"13701727375","buyerIdType":"1","buyerIdNumber":"130435200009241538","consignee":"袁晓雨","consigneeTelephone":"13701727375","consigneeAddress":"北京北京市东城区","note":"test"},"orderList":[{"gnum":1,"itemNo":"1","itemName":"LANNA兰纳","gmodel":"10片/包","itemDescribe":"","barCode":"1","unit":"011","qty":"1","price":"1","totalPrice":"1","currency":"142","country":"136","note":"test"}]},"guid":"AFNC7T-WEASLEY-20230713095517-N04JEE","version":"1.0","baseTransfer":{"copCode":"4601630004","copName":"海南省荣誉进出口贸易有限公司","dxpMode":"DXP","dxpId":"DXPENT0000530815","note":"test"}}<br>}<br></pre><br></li><br><li><br><b>XML报文: 需组装XML结构的报文</b><br><pre><br>{<br>  "messageType": "CEB311Message",<br>  "dataType": "XML",<br>  "cebMessage": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n                <ceb:CEB311Message guid=\"CEB311_HNZB_HNFX_20230707223752_006\" version=\"1.0\" xmlns:ceb=\"http://www.chinaport.gov.cn/ceb\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n                    <ceb:Order>\n                        <ceb:OrderHead>\n                            <ceb:guid>CEB311_HNZB_HNFX_20230707223752_006</ceb:guid>\n                            <ceb:appType>1</ceb:appType>\n                            <ceb:appTime>20230704181028</ceb:appTime>\n                            <ceb:appStatus>2</ceb:appStatus>\n                            <ceb:orderType>I</ceb:orderType>\n                            <ceb:orderNo>T_C5051511332138160010</ceb:orderNo>\n                            <ceb:ebpCode>4601630004</ceb:ebpCode>\n                            <ceb:ebpName>海南省荣誉进出口贸易有限公司</ceb:ebpName>\n                            <ceb:ebcCode>4601630004</ceb:ebcCode>\n                            <ceb:ebcName>海南省荣誉进出口贸易有限公司</ceb:ebcName>\n                            <ceb:goodsValue>0.01</ceb:goodsValue>\n                            <ceb:freight>0</ceb:freight>\n                            <ceb:discount>0</ceb:discount>\n                            <ceb:taxTotal>0</ceb:taxTotal>\n                            <ceb:acturalPaid>0.01</ceb:acturalPaid>\n                            <ceb:currency>142</ceb:currency>\n                            <ceb:buyerRegNo>4</ceb:buyerRegNo>\n                            <ceb:buyerName>袁晓雨</ceb:buyerName>\n                            <ceb:buyerTelephone>13701727375</ceb:buyerTelephone>\n                            <ceb:buyerIdType>1</ceb:buyerIdType>\n                            <ceb:buyerIdNumber>130435200009241538</ceb:buyerIdNumber>\n                            <ceb:consignee>袁晓雨</ceb:consignee>\n                            <ceb:consigneeTelephone>13701727375</ceb:consigneeTelephone>\n                            <ceb:consigneeAddress>北京北京市东城区</ceb:consigneeAddress>\n                            <ceb:note>test</ceb:note>\n                        </ceb:OrderHead>\n                        <ceb:OrderList>\n                            <ceb:gnum>1</ceb:gnum>\n                            <ceb:itemNo>1</ceb:itemNo>\n                            <ceb:itemName>LANNA兰纳</ceb:itemName>\n                            <ceb:gmodel>10片/包</ceb:gmodel>\n                            <ceb:itemDescribe></ceb:itemDescribe>\n                            <ceb:barCode>1</ceb:barCode>\n                            <ceb:unit>011</ceb:unit>\n                            <ceb:qty>1</ceb:qty>\n                            <ceb:price>1</ceb:price>\n                            <ceb:totalPrice>1</ceb:totalPrice>\n                            <ceb:currency>142</ceb:currency>\n                            <ceb:country>136</ceb:country>\n                            <ceb:note>test</ceb:note>\n                        </ceb:OrderList>\n                    </ceb:Order>\n                    <ceb:BaseTransfer>\n                        <ceb:copCode>4601630004</ceb:copCode>\n                        <ceb:copName>海南省荣誉进出口贸易有限公司</ceb:copName>\n                        <ceb:dxpMode>DXP</ceb:dxpMode>\n                        <ceb:dxpId>DXPENT0000530815</ceb:dxpId>\n                        <ceb:note>test</ceb:note>\n                    </ceb:BaseTransfer>\n                </ceb:CEB311Message>"<br>}<br></pre><br></li><br></ul>

**Body-parameters:**

Parameter | Type|Description|Required|Since
---|---|---|---|---
messageType|enum|消息类型<br/>CEB311Message -("CEB311Message")<br/>CEB621Message -("CEB621Message")<br/>|true|-
dataType|enum|报文的数据类型<br/>JSON<br/>XML<br/>|true|-
cebMessage|object|进口单、出口单的底层数据模型<br><ul><br>以CEB311Message数据类型为例<br><li><br><p>JSON示例</p><br><pre><code><br>{"order":{"orderHead":{"guid":"AFNC7T-WEASLEY-20230713095517-N04JEE","appType":"1","appTime":"20230704181028","appStatus":"2","orderType":"I","orderNo":"T_C5051511332138160010","ebpCode":"4601630004","ebpName":"海南省荣誉进出口贸易有限公司","ebcCode":"4601630004","ebcName":"海南省荣誉进出口贸易有限公司","goodsValue":"0.01","freight":"0","discount":"0","taxTotal":"0","acturalPaid":"0.01","currency":"142","buyerRegNo":"4","buyerName":"袁晓雨","buyerTelephone":"13701727375","buyerIdType":"1","buyerIdNumber":"130435200009241538","consignee":"袁晓雨","consigneeTelephone":"13701727375","consigneeAddress":"北京北京市东城区","note":"test"},"orderList":[{"gnum":1,"itemNo":"1","itemName":"LANNA兰纳","gmodel":"10片/包","itemDescribe":"","barCode":"1","unit":"011","qty":"1","price":"1","totalPrice":"1","currency":"142","country":"136","note":"test"}]},"guid":"AFNC7T-WEASLEY-20230713095517-N04JEE","version":"1.0","baseTransfer":{"copCode":"4601630004","copName":"海南省荣誉进出口贸易有限公司","dxpMode":"DXP","dxpId":"DXPENT0000530815","note":"test"}}<br></code></pre><br></li><br><li><br><p>XML示例: 不带ds:Signature节点的CEBXxxMessage.xml原文;<a href='http://tool.qdhuaxun.cn/ceb/CEB311Message.xml'>待加签xml报文样例</a></p><br></li><br></ul>|true|-
└─any object|object|any object.|false|-

**Request-example:**
```
curl -X POST -H 'Content-Type: application/json; charset=utf-8' -i http://localhost:8080/rpc/eport/upload/CEBMessage --data '{
  "messageType": "CEB311Message",
  "dataType": "JSON",
  "cebMessage": {
    "object": "any object"
  }
}'
```
**Response-fields:**

Field | Type|Description|Since
---|---|---|---
message|string|返回消息|-
success|boolean|是否成功|-
timestamp|string|响应时间戳|-
code|int32|状态码|-
data|object|响应数据|-
└─payload|object|请求数据载荷|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─Message|object|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─MessageHead|object|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─MessageId|string|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─MessageType|string|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─SenderID|string|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─ReceiverID|string|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─SendTime|string|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─Version|string|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─MessageBody|object|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─data|string|No comments found.|-
└─original|string|三方原始返回|-
└─expected|string|三方期望返回|-

**Response-example:**
```
{
  "message": "success",
  "success": true,
  "timestamp": "2023-07-13 13:34:51",
  "code": 308,
  "data": {
    "payload": {
      "Message": {
        "MessageHead": {
          "MessageId": "102",
          "MessageType": "8a17pr",
          "SenderID": "102",
          "ReceiverID": "102",
          "SendTime": "2023-07-13 13:34:51",
          "Version": "1.12"
        },
        "MessageBody": {
          "data": "eupudw"
        }
      }
    },
    "original": "khocfk",
    "expected": "ulbjdz"
  }
}
```

### 推送海关179号数据
**URL:** http://localhost:8080/rpc/eport/upload/179/data

**Type:** POST

**Author:** weasley

**Content-Type:** application/json; charset=utf-8

**Description:** <ul><br>json示例:<br><pre><br>{<br> "sessionID": "032C3F56-0EE6-4558-B548-6C7A3451F07D",<br>  "payExchangeInfoHead": {<br>    "guid": "E4766021-21AC-1AA2-21DD-E974DF93C11D",<br>    "initalRequest": "<xml><appid><![CDATA[xwxwxwxwx112121]]></appid><mch_id>11111111</mch_id><body><![CDATA[测试测试]]></body><nonce_str><![CDATA[ashdgahgdhaghgliqwueyqu1]]></nonce_str><out_trade_no>202009231454212140210352</out_trade_no><total_fee>500</total_fee><spbill_create_ip><![CDATA[192.168.0.1]]></spbill_create_ip><notify_url><![CDATA[https://www.baidu.com]]></notify_url><openid><![CDATA[adasyduiyasdhjxzycua-Q]]></openid><trade_type><![CDATA[JSAPI]]></trade_type><sign><![CDATA[asd1sa56d4545wqe44wq5]]></sign></xml>",<br>    "initalResponse": "<xml><appid><![CDATA[xwxwxwxwx112121]]></appid><bank_type><![CDATA[OTHERS]]></bank_type><cash_fee>500</cash_fee><fee_type><![CDATA[CNY]]></fee_type><is_subscribe><![CDATA[N]]></is_subscribe><mch_id>11111111</mch_id><nonce_str><![CDATA[ashdgahgdhaghgliqwueyqu1]]></nonce_str><openid><![CDATA[adasyduiyasdhjxzycua-Q]]></openid><out_trade_no>202009231454212140210352</out_trade_no><result_code><![CDATA[SUCCESS]]></result_code><return_code><![CDATA[SUCCESS]]></return_code><sign><![CDATA[asgdhasgdhasgdhgasgdhasgdh]]></sign><time_end>20200923145426</time_end><total_fee>500</total_fee><trade_type><![CDATA[JSAPI]]></trade_type><transaction_id>4200000681202009235085032319</transaction_id></xml>",<br>    "ebpCode": "请替换",<br>    "payCode": "4403169D3W",<br>    "payTransactionId": "4200000681202009235085032319",<br>    "totalAmount": 5,<br>    "currency": "142",<br>    "verDept": "3",<br>    "payType": "4",<br>    "tradingTime": "20200923145426",<br>    "note": ""<br>  },<br>  "payExchangeInfoLists": [<br>    {<br>      "orderNo": "202009231454218421271832",<br>      "goodsInfo": [<br>        {<br>          "gname": "济州花梨精华面膜",<br>          "itemLink": "http://m.yunjiweidian.com/yunjibuyer/static/vue-buyer/idc/index.html#/detail?itemId=999761&shopId=453"<br>        }<br>      ],<br>      "recpAccount": "请替换",<br>      "recpCode": "请替换",<br>      "recpName": "请替换"<br>    }<br>  ],<br>  "serviceTime": "1601282210417"<br>}<br></pre><br></ul>

**Body-parameters:**

Parameter | Type|Description|Required|Since
---|---|---|---|---
sessionID|string|海关发起请求时，平台接收的会话ID|true|-
payExchangeInfoHead|object|支付原始数据表头|true|-
└─guid|string|系统唯一序号|false|-
└─initalRequest|string|原始请求|false|-
└─initalResponse|string|原始响应|false|-
└─ebpCode|string|电商平台代码|false|-
└─payCode|string|支付企业代码|false|-
└─payTransactionId|string|交易流水号(支付报关时会有返回)<br>微信对应的字段是:verify_department_trade_id<br>支付宝对应的字段是:pay_transaction_id|false|-
└─totalAmount|double|交易金额|false|-
└─currency|string|币制(币制编码:142(人民币))|false|-
└─verDept|string|验核机构(支付报关结果会返回),1-银联 2-网联 3-其他<br>微信返回的字段是:verify_department<br>支付宝对应的字段是:ver_dept|false|-
└─payType|string|支付类型|false|-
└─tradingTime|string|交易成功时间|false|-
└─note|string|备注|false|-
payExchangeInfoLists|array|支付原始数据表体|true|-
└─orderNo|string|订单编号|false|-
└─goodsInfo|array|商品信息|false|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─gname|string|商品名称|false|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─itemLink|string|商品展示链接地址|false|-
└─recpAccount|string|收款账号|false|-
└─recpCode|string|收款企业代码|false|-
└─recpName|string|收款企业名称|false|-
serviceTime|string|返回时的系统时间|true|-

**Request-example:**
```
curl -X POST -H 'Content-Type: application/json; charset=utf-8' -i http://localhost:8080/rpc/eport/upload/179/data --data '{
  "sessionID": "102",
  "payExchangeInfoHead": {
    "guid": "102",
    "initalRequest": "mifuke",
    "initalResponse": "323049",
    "ebpCode": "56622",
    "payCode": "56622",
    "payTransactionId": "102",
    "totalAmount": 29.00,
    "currency": "l99210",
    "verDept": "d1p3ef",
    "payType": "lstrov",
    "tradingTime": "2023-07-13 13:34:51",
    "note": "c2o3aj"
  },
  "payExchangeInfoLists": [
    {
      "orderNo": "uq1763",
      "goodsInfo": [
        {
          "gname": "clifford.pacocha",
          "itemLink": "xhsh3j"
        }
      ],
      "recpAccount": "z1b9nx",
      "recpCode": "56622",
      "recpName": "clifford.pacocha"
    }
  ],
  "serviceTime": "2023-07-13 13:34:51"
}'
```
**Response-fields:**

Field | Type|Description|Since
---|---|---|---
message|string|返回消息|-
success|boolean|是否成功|-
timestamp|string|响应时间戳|-
code|int32|状态码|-
data|object|响应数据|-
└─payload|object|请求数据载荷|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─any object|object|any object.|-
└─original|string|三方原始返回|-
└─expected|object|三方期望返回|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─code|string|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─total|int64|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─message|string|No comments found.|-
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─serviceTime|int64|No comments found.|-

**Response-example:**
```
{
  "message": "success",
  "success": true,
  "timestamp": "2023-07-13 13:34:51",
  "code": 865,
  "data": {
    "payload": {
      "mapKey": {
        "waring": "You may use java.util.Object for Map value; smart-doc can't be handle."
      }
    },
    "original": "c63igj",
    "expected": {
      "code": "56622",
      "total": 415,
      "message": "success",
      "serviceTime": 1689226491000
    }
  }
}
```

## 电子口岸X509证书
### 下载证书
**URL:** http://localhost:8080/rpc/eport/cert/download

**Type:** GET

**Author:** lwj

**Content-Type:** application/x-www-form-urlencoded;charset=utf-8

**Description:** 证书文件格式:获取证书编号.cer

**Request-example:**
```
curl -X GET -i http://localhost:8080/rpc/eport/cert/download
```

**Response-example:**
```
Return void.
```

## 电子口岸报文加签
### 海关数据加签
**URL:** http://localhost:8080/rpc/eport/signature

**Type:** POST

**Author:** lwj

**Content-Type:** application/json; charset=utf-8

**Description:** 此接口已经整合"海关总署XML"和"海关179数据抓取"的加签<br/><br><ul><b>支持的加签类型</b><li>1.海关CEBXxxMessage XML数据加签</li><li>2. 海关179数据加签</li></ul>

**Body-parameters:**

Parameter | Type|Description|Required|Since
---|---|---|---|---
id|int32|唯一id, 用来区分是哪一次发送的消息，默认值=1，从1开始，{@code int} 最大, 2<sup>31</sup>-1.|false|-
data|string|加签源数据<br><ul><br>    <b>支持的加签数据类型</b><br>    <li>1. 不带ds:Signature节点的CEBXxxMessage.xml原文;<a href='http://tool.qdhuaxun.cn/ceb/CEB311Message.xml'>待加签xml报文样例</a></li><br>    <li>2. 海关179加签数据; 数据格式请传符合「海关179数据规范」的标准字符串,入参示例:<br><pre>"sessionID":"ad2254-8hewyf32-55616249"||"payExchangeInfoHead":"{"guid":"9D55BA71-22DE-41F4-8B50-C36C83B3B530","initalRequest":"原始请求","initalResponse":"ok","ebpCode":"4404840022","payCode":"312226T001","payTransactionId":"2018121222001354081010726129","totalAmount":100,"currency":"142","verDept":"3","payType":"1","tradingTime":"20181212041803","note":"批量订单，测试订单优化,生成多个so订单"}"||"payExchangeInfoLists":"[{"orderNo":"SO1710301150602574003","goodsInfo":[{"gname":"lhy-gnsku3","itemLink":"http://m.yunjiweidian.com/yunjibuyer/static/vue-buyer/idc/index.html#/detail?itemId=999761&shopId=453"},{"gname":"lhy-gnsku2","itemLink":"http://m.yunjiweidian.com/yunjibuyer/static/vue-buyer/idc/index.html#/detail?itemId=999760&shopId=453"}],"recpAccount":"OSA571908863132601","recpCode":"","recpName":"YUNJIHONGKONGLIMITED"}]"||"serviceTime":"1544519952469"</pre><br>    </li><br></ul>|true|-

**Request-example:**
```
curl -X POST -H 'Content-Type: application/json; charset=utf-8' -i http://localhost:8080/rpc/eport/signature --data '{
  "id": 562,
  "data": "dsxs6y"
}'
```
**Response-fields:**

Field | Type|Description|Since
---|---|---|---
message|string|返回消息|-
success|boolean|是否成功|-
timestamp|string|响应时间戳|-
code|int32|状态码|-
data|object|响应数据|-
└─success|boolean|本次加签是否成功|-
└─certNo|string|签名的ukey的卡序列号|-
└─x509Certificate|string|签名的ukey证书|-
└─digestValue|string|xml的数字摘要，先对不包含Signature节点的原始报文,进行C14n格式化，然后取shal二进制摘要，然后对sha1的值进行base64编码<br><ul><br>    <li><a href='http://tool.qdhuaxun.cn/ceb/CEB311Message.xml'>待加签报文样例</a></li><br></ul>|-
└─signatureValue|string|调用ukey获取的签名值|-

**Response-example:**
```
{
  "message": "success",
  "success": true,
  "timestamp": "2023-07-13 13:34:51",
  "code": 195,
  "data": {
    "success": true,
    "certNo": "c7j259",
    "x509Certificate": "80u746",
    "digestValue": "6o0q9h",
    "signatureValue": "4qomtc"
  }
}
```


